<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#a855f7">
    <meta name="msapplication-TileColor" content="#a855f7">
    <title>Community - Myco Language</title>
    <!-- Updated for GitHub Pages deployment -->
    <meta name="description" content="Join the Myco programming language community. Get updates on development progress, share ideas, and connect with other developers.">
    <meta name="keywords" content="Myco, programming language, community, development, updates, Discord, developers">
    <meta name="author" content="Ivy Mycelia">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="google" content="notranslate">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://mycolang.org/community.html">
    
    <!-- DNS Prefetch for performance -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mycolang.org/community.html">
    <meta property="og:title" content="Community - Myco Language">
    <meta property="og:description" content="Join the Myco programming language community. Get updates on development progress, share ideas, and connect with other developers.">
    <meta property="og:image" content="https://mycolang.org/Assets/Myco_Purple.png">
    <meta property="og:image:width" content="120">
    <meta property="og:image:height" content="120">
    <meta property="og:image:alt" content="Myco Programming Language Logo">
    <meta property="og:site_name" content="Myco Language">
    <meta property="og:locale" content="en_US">
    <meta property="og:updated_time" content="2024-01-01T00:00:00+00:00">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@mycolang">
    <meta name="twitter:creator" content="@mycolang">
    <meta name="twitter:image" content="https://mycolang.org/Assets/Myco_Purple.png">
    <meta name="twitter:image:alt" content="Myco Programming Language Logo">

    <meta property="twitter:card" content="summary">
    <meta property="twitter:url" content="https://mycolang.org/community.html">
    <meta property="twitter:title" content="Community - Myco Language">
    <meta property="twitter:description" content="Join the Myco programming language community. Get updates on development progress, share ideas, and connect with other developers.">
    <meta property="twitter:image" content="https://mycolang.org/Assets/Myco_Purple.png">
    
    <!-- Favicon - Comprehensive favicon support for Google -->
    <link rel="icon" type="image/x-icon" href="Myco_Purple.ico">
    <link rel="shortcut icon" type="image/x-icon" href="Myco_Purple.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="Assets/Myco_Purple.png">
    <link rel="icon" type="image/png" sizes="32x32" href="Assets/Myco_Purple.png">
    <link rel="icon" type="image/png" sizes="48x48" href="Assets/Myco_Purple.png">
    <link rel="icon" type="image/png" sizes="64x64" href="Assets/Myco_Purple.png">
    <link rel="icon" type="image/png" sizes="128x128" href="Assets/Myco_Purple.png">
    <link rel="icon" type="image/png" sizes="256x256" href="Assets/Myco_Purple.png">
    <link rel="icon" type="image/png" sizes="512x512" href="Assets/Myco_Purple.png">
    
    <!-- Apple Touch Icons for home screen -->
    <link rel="apple-touch-icon" sizes="180x180" href="Assets/Myco_Purple.png">
    <link rel="apple-touch-icon" sizes="152x152" href="Assets/Myco_Purple.png">
    <link rel="apple-touch-icon" sizes="144x144" href="Assets/Myco_Purple.png">
    <link rel="apple-touch-icon" sizes="120x120" href="Assets/Myco_Purple.png">
    <link rel="apple-touch-icon" sizes="114x114" href="Assets/Myco_Purple.png">
    <link rel="apple-touch-icon" sizes="76x76" href="Assets/Myco_Purple.png">
    <link rel="apple-touch-icon" sizes="72x72" href="Assets/Myco_Purple.png">
    <link rel="apple-touch-icon" sizes="60x60" href="Assets/Myco_Purple.png">
    <link rel="apple-touch-icon" sizes="57x57" href="Assets/Myco_Purple.png">
    <link rel="apple-touch-icon" href="Assets/Myco_Purple.png">
    
    <!-- Microsoft Tiles for Windows -->
    <meta name="msapplication-TileImage" content="Assets/Myco_Purple.png">
    <meta name="msapplication-TileColor" content="#a855f7">
    <meta name="msapplication-config" content="browserconfig.xml">
    
    <!-- Additional SEO and Social Media Meta Tags -->
    <meta name="application-name" content="Myco Language">
    <meta name="msapplication-tooltip" content="Myco Programming Language">
    <meta name="msapplication-starturl" content="/">
    <meta name="msapplication-navbutton-color" content="#a855f7">
    <meta name="msapplication-window" content="width=1024;height=768">
    
    <!-- Discord Embed Optimization -->
    <meta name="theme-color" content="#a855f7">
    <meta name="color-scheme" content="dark light">
    
    <!-- Additional Social Media Meta Tags -->
    <meta property="og:determiner" content="the">
    <meta property="og:image:type" content="image/png">
    
    <!-- Dynamic meta tags for post-specific embeds -->
    <meta id="dynamic-og-title" property="og:title" content="Community - Myco Language">
    <meta id="dynamic-og-description" property="og:description" content="Join the Myco programming language community. Get updates on development progress, share ideas, and connect with other developers.">
    <meta id="dynamic-og-url" property="og:url" content="https://mycolang.org/community.html">
    <meta id="dynamic-twitter-title" name="twitter:title" content="Community - Myco Language">
    <meta id="dynamic-twitter-description" name="twitter:description" content="Join the Myco programming language community. Get updates on development progress, share ideas, and connect with other developers.">
    <meta id="dynamic-twitter-url" property="twitter:url" content="https://mycolang.org/community.html">
    <meta id="dynamic-page-title" content="Community - Myco Language">
    <meta property="og:image:secure_url" content="https://mycolang.org/Assets/Myco_Purple.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="site.webmanifest">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/main.css">
    
    <!-- Apply theme immediately to prevent flickering -->
    <script>
        (function() {
            function applyTheme() {
                // Only proceed if DOM elements are available
                if (!document.documentElement || !document.body) {
                    return;
                }
                
                // Check for trans theme first (highest priority)
                const transThemeActive = localStorage.getItem('myco-trans-theme') === 'true';
                const savedTheme = localStorage.getItem('myco-theme');
                
                if (transThemeActive) {
                    // Trans theme takes precedence over regular theme selection
                    document.documentElement.classList.add('trans-theme');
                    document.body.classList.add('trans-theme');
                } else if (savedTheme === 'light') {
                    document.documentElement.classList.add('light-theme');
                    document.body.classList.add('light-theme');
                }
                // dark theme is default (no class needed)
            }
            
            // Only try to apply theme if DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', applyTheme);
            } else {
                // DOM is already loaded, apply theme immediately
                applyTheme();
            }
            
            // Fallback: apply theme when window loads
            window.addEventListener('load', applyTheme);
        })();
    </script>
    
    <!-- Dynamic post detection and embed navigation -->
    <script>
        // Browser compatibility polyfills
        if (!window.Promise) {
            // Simple Promise polyfill for older browsers
            window.Promise = function(executor) {
                var self = this;
                self.state = 'pending';
                self.value = undefined;
                self.reason = undefined;
                self.onFulfilledCallbacks = [];
                self.onRejectedCallbacks = [];
                
                function resolve(value) {
                    if (self.state === 'pending') {
                        self.state = 'fulfilled';
                        self.value = value;
                        self.onFulfilledCallbacks.forEach(function(callback) {
                            callback(value);
                        });
                    }
                }
                
                function reject(reason) {
                    if (self.state === 'pending') {
                        self.state = 'rejected';
                        self.reason = reason;
                        self.onRejectedCallbacks.forEach(function(callback) {
                            callback(reason);
                        });
                    }
                }
                
                try {
                    executor(resolve, reject);
                } catch (e) {
                    reject(e);
                }
            };
            
            Promise.prototype.then = function(onFulfilled, onRejected) {
                var self = this;
                var promise2 = new Promise(function(resolve, reject) {
                    if (self.state === 'fulfilled') {
                        setTimeout(function() {
                            try {
                                var x = onFulfilled ? onFulfilled(self.value) : self.value;
                                resolve(x);
                            } catch (e) {
                                reject(e);
                            }
                        }, 0);
                    } else if (self.state === 'rejected') {
                        setTimeout(function() {
                            try {
                                var x = onRejected ? onRejected(self.reason) : self.reason;
                                reject(x);
                            } catch (e) {
                                reject(e);
                            }
                        }, 0);
                    } else {
                        self.onFulfilledCallbacks.push(function(value) {
                            setTimeout(function() {
                                try {
                                    var x = onFulfilled ? onFulfilled(value) : value;
                                    resolve(x);
                                } catch (e) {
                                    reject(e);
                                }
                            }, 0);
                        });
                        self.onRejectedCallbacks.push(function(reason) {
                            setTimeout(function() {
                                try {
                                    var x = onRejected ? onRejected(reason) : reason;
                                    reject(x);
                                } catch (e) {
                                    reject(x);
                                }
                            }, 0);
                        });
                    }
                });
                return promise2;
            };
        }
        
        // Array.includes polyfill for older browsers
        if (!Array.prototype.includes) {
            Array.prototype.includes = function(searchElement, fromIndex) {
                if (this == null) {
                    throw new TypeError('"this" is null or not defined');
                }
                
                var o = Object(this);
                var len = parseInt(o.length) || 0;
                
                if (len === 0) {
                    return false;
                }
                
                var n = parseInt(fromIndex) || 0;
                var k;
                
                if (n >= 0) {
                    k = n;
                } else {
                    k = len + n;
                    if (k < 0) {
                        k = 0;
                    }
                }
                
                while (k < len) {
                    if (o[k] === searchElement) {
                        return true;
                    }
                    k++;
                }
                
                return false;
            };
        }
        
        // showNotification fallback for older browsers
        if (typeof window.showNotification !== 'function') {
            window.showNotification = function(message, type) {
                // Simple fallback notification
                var notification = document.createElement('div');
                notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #333; color: white; padding: 15px; border-radius: 5px; z-index: 10000; font-family: Arial, sans-serif;';
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(function() {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 3000);
            };
        }
        
        let allPosts = [];
        let currentPostIndex = 0;
        
        // Detect available posts by checking the community folder
        function detectPosts() {
            console.log('Starting post detection...');
            var postNumbers = [];
            var postNumber = 1;
            
            // Use a recursive approach instead of async/await for better compatibility
            function checkNextPost() {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', 'community/post-' + postNumber + '.html', true);
                
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            postNumbers.push(postNumber);
                            console.log('Found post-' + postNumber + '.html');
                            postNumber++;
                            // Check next post
                            checkNextPost();
                        } else {
                            console.log('Post ' + postNumber + ' not found (' + xhr.status + '), stopping detection');
                            // Sort posts in descending order (newest first)
                            allPosts = postNumbers.sort(function(a, b) { return b - a; });
                            console.log('Detected ' + allPosts.length + ' posts:', allPosts);
                            
                            // Initialize pagination
                            initializePagination();
                            
                            // Load initial post based on URL or default to first
                            loadInitialPost();
                        }
                    }
                };
                
                xhr.onerror = function() {
                    console.log('Error checking post ' + postNumber + ':', xhr.statusText);
                    // Sort posts in descending order (newest first)
                    allPosts = postNumbers.sort(function(a, b) { return b - a; });
                    console.log('Detected ' + allPosts.length + ' posts:', allPosts);
                    
                    // Initialize pagination
                    initializePagination();
                    
                    // Load initial post based on URL or default to first
                    loadInitialPost();
                };
                
                xhr.send();
            };
            
            checkNextPost();
        }
        
        // Initialize pagination with detected posts
        function initializePagination() {
            const paginationNumbers = document.querySelector('.pagination-numbers');
            paginationNumbers.innerHTML = '';
            
            const totalPosts = allPosts.length;
            
            // allPosts is sorted with newest first (highest ID), so:
            // allPosts[0] = newest post (should be page 1)
            // allPosts[1] = second newest (should be page 2)
            // etc.
            
            // Show current page and surrounding pages with ellipsis
            if (totalPosts <= 3) {
                // If 3 or fewer posts, show all pages
                for (let i = 1; i <= totalPosts; i++) {
                    const postId = allPosts[i - 1];
                    const isActive = i === 1; // Page 1 (newest post) is always active initially
                    addPageButton(postId, paginationNumbers, isActive);
                }
            } else {
                // Show current page and surrounding pages
                const currentPage = 1; // Start with page 1 (newest post)
                showPaginationRange(currentPage, totalPosts, paginationNumbers);
            }
            
            // Update navigation button states
            updateNavigationButtons();
        }
        
        // Add a page button with animation
        function addPageButton(postId, container, isActive = false) {
            const pageButton = document.createElement('button');
            pageButton.className = 'pagination-btn page-number';
            
            // Calculate the page number (1-based) for display
            const pageNumber = allPosts.indexOf(postId) + 1;
            pageButton.textContent = pageNumber;
            
            pageButton.setAttribute('data-page', postId);
            pageButton.setAttribute('data-index', allPosts.indexOf(postId));
            
            if (isActive) {
                pageButton.classList.add('active');
            }
            
            pageButton.onclick = () => loadPost(postId);
            
            // Add entrance animation
            pageButton.style.opacity = '0';
            pageButton.style.transform = 'scale(0.8)';
            container.appendChild(pageButton);
            
            // Animate in
            setTimeout(() => {
                pageButton.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                pageButton.style.opacity = '1';
                pageButton.style.transform = 'scale(1)';
            }, 50);
        }
        
        // Add ellipsis with animation
        function addEllipsis(container) {
            const ellipsis = document.createElement('span');
            ellipsis.className = 'pagination-ellipsis';
            ellipsis.innerHTML = '&hellip;';
            ellipsis.onclick = () => showPageJumpDialog();
            
            // Add entrance animation
            ellipsis.style.opacity = '0';
            ellipsis.style.transform = 'scale(0.8)';
            container.appendChild(ellipsis);
            
            // Animate in
            setTimeout(() => {
                ellipsis.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                ellipsis.style.opacity = '1';
                ellipsis.style.transform = 'scale(1)';
            }, 100);
        }
        
        // Show dialog to jump to specific page
        function showPageJumpDialog() {
            const dialog = document.createElement('div');
            dialog.className = 'page-jump-dialog';
            dialog.innerHTML = `
                <div class="page-jump-content">
                    <h3>Go to Page</h3>
                    <p>Enter a page number (1-${allPosts.length}):</p>
                    <input type="number" min="1" max="${allPosts.length}" class="page-jump-input" placeholder="Page number">
                    <div class="page-jump-buttons">
                        <button class="btn btn-outline" onclick="this.closest('.page-jump-dialog').remove()">Cancel</button>
                        <button class="btn btn-primary" onclick="jumpToPage(this)">Go</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(dialog);
            
            // Focus input and add enter key support
            const input = dialog.querySelector('.page-jump-input');
            input.focus();
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    jumpToPage(input);
                }
            });
            
            // Animate in
            setTimeout(() => {
                dialog.style.opacity = '1';
                dialog.style.transform = 'scale(1)';
            }, 50);
        }
        
        // Jump to specific page
        function jumpToPage(element) {
            const input = element.closest('.page-jump-content').querySelector('.page-jump-input');
            const pageNumber = parseInt(input.value);
            
            if (pageNumber >= 1 && pageNumber <= allPosts.length) {
                loadPost(pageNumber);
                element.closest('.page-jump-dialog').remove();
            } else {
                input.style.borderColor = 'var(--error-color)';
                input.placeholder = `Please enter 1-${allPosts.length}`;
            }
        }
        
        // Load a specific post
        function loadPost(postNumber) {
            // Prevent multiple simultaneous post loads
            if (loadPost.isLoading) {
                console.log('Post load already in progress, skipping...');
                return;
            }
            
            loadPost.isLoading = true;
            
            // Add fancy loading state with animation
            var postContainer = document.getElementById('post-content');
            postContainer.style.transform = 'scale(0.98)';
            postContainer.style.opacity = '0.7';
            postContainer.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
            
            // Update URL with hash for internal navigation (keeps main page URL)
            var newUrl = 'community.html#post-' + postNumber;
            if (window.history && window.history.pushState) {
                window.history.pushState({postNumber: postNumber}, '', newUrl);
            } else {
                // Fallback for older browsers
                window.location.hash = '#post-' + postNumber;
            }
            
            // Update current post index
            currentPostIndex = allPosts.indexOf(postNumber);
            
            // Only update pagination active state, don't rebuild entire pagination
            updateActivePage(postNumber);
            
            // Update navigation button states
            updateNavigationButtons();
            
            // Load the post content directly into the DOM
            loadPostContent(postNumber, function() {
                // Reset loading flag only after content is fully loaded
                loadPost.isLoading = false;
                
                // Restore normal state after loading
                postContainer.style.transform = 'scale(1)';
                postContainer.style.opacity = '1';
            });
        }
        
        // Post loading is now handled directly by loadPostContent function
        // No more embed-related complexity needed
        
        // PostMessage listener no longer needed since posts are loaded directly into DOM
        
        // Parse and load post content directly into DOM
        function loadPostContent(postNumber, onComplete) {
            // Prevent multiple simultaneous content loads
            if (loadPostContent.isLoading) {
                console.log('Post content load already in progress, skipping...');
                if (onComplete) onComplete();
                return;
            }
            
            loadPostContent.isLoading = true;
            
            // Show loading state
            var postContainer = document.getElementById('post-content');
            postContainer.innerHTML = '<div class="loading-spinner"><div class="spinner-ring"></div><div class="spinner-text">Loading post...</div></div>';
            
            // Use XMLHttpRequest instead of fetch for better compatibility
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'community/post-' + postNumber + '.html', true);
            
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var html = xhr.responseText;
                        
                        // Parse the HTML to extract the post content
                        var parser = new DOMParser();
                        var doc = parser.parseFromString(html, 'text/html');
                        
                        // Extract the post content from the parsed document
                        var postContent = doc.querySelector('.post-content');
                        if (!postContent) {
                            console.error('Post content not found');
                            postContainer.innerHTML = '<div class="content-section"><h3>Error Loading Post</h3><p>Post content not found.</p></div>';
                            return;
                        }
                        
                        // Extract the script content to execute the functions
                        var scripts = doc.querySelectorAll('script');
                        var scriptContent = '';
                        for (var i = 0; i < scripts.length; i++) {
                            var script = scripts[i];
                            if (script.textContent) {
                                scriptContent += script.textContent + '\n';
                            }
                        }
                        
                        // Inject the post content into the container
                        postContainer.innerHTML = postContent.innerHTML;
                        
                        // Execute the script content to make functions available
                        if (scriptContent) {
                            try {
                                eval(scriptContent);
                            } catch (scriptError) {
                                console.warn('Script execution warning:', scriptError);
                            }
                        }
                        
                        // Create sharePost function for the current post
                        window.sharePost = function() {
                            var url = 'https://mycolang.org/community/post-' + postNumber + '.html';
                            var titleElement = document.querySelector('.post-header h3');
                            var title = titleElement ? titleElement.textContent : 'Myco Community Post';
                            
                            console.log('sharePost called for post', postNumber, 'with URL:', url);
                            
                            if (navigator.share) {
                                navigator.share({
                                    title: title,
                                    url: url
                                });
                            } else {
                                // Fallback: copy to clipboard
                                if (navigator.clipboard && navigator.clipboard.writeText) {
                                    navigator.clipboard.writeText(url).then(function() {
                                        console.log('Clipboard write successful, showing notification');
                                        showNotification('Link copied to clipboard!', 'success');
                                    }).catch(function(error) {
                                        console.error('Clipboard write failed:', error);
                                        // Fallback if clipboard fails
                                        alert('Link copied to clipboard!');
                                    });
                                } else {
                                    // Fallback for older browsers
                                    var textArea = document.createElement('textarea');
                                    textArea.value = url;
                                    document.body.appendChild(textArea);
                                    textArea.select();
                                    try {
                                        document.execCommand('copy');
                                        showNotification('Link copied to clipboard!', 'success');
                                    } catch (err) {
                                        alert('Link copied to clipboard!');
                                    }
                                    document.body.removeChild(textArea);
                                }
                            }
                        };
                        
                        console.log('sharePost function created for post', postNumber);
                        
                        // Add entrance animation
                        postContainer.style.animation = 'postEntrance 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                        setTimeout(function() {
                            postContainer.style.animation = '';
                        }, 600);
                        
                        console.log('Post ' + postNumber + ' loaded successfully');
                        
                        // Reset loading flag
                        loadPostContent.isLoading = false;
                        
                        // Call completion callback
                        if (onComplete) onComplete();
                        
                    } else {
                        console.error('Failed to load post ' + postNumber + ': ' + xhr.status);
                        postContainer.innerHTML = '<div class="content-section"><h3>Error Loading Post</h3><p>Sorry, there was an error loading this post. Please try again.</p><button onclick="loadPostContent(' + postNumber + ', function(){loadPost.isLoading = false;})" class="btn btn-outline">Retry</button></div>';
                        
                        // Reset loading flag on error too
                        loadPostContent.isLoading = false;
                        
                        // Call completion callback even on error
                        if (onComplete) onComplete();
                    }
                }
            };
            
            xhr.onerror = function() {
                console.error('Network error loading post ' + postNumber);
                postContainer.innerHTML = '<div class="content-section"><h3>Error Loading Post</h3><p>Network error. Please check your connection and try again.</p><button onclick="loadPostContent(' + postNumber + ', function(){loadPost.isLoading = false;})" class="btn btn-outline">Retry</button></div>';
                
                // Reset loading flag on network error
                loadPostContent.isLoading = false;
                
                // Call completion callback on network error
                if (onComplete) onComplete();
            };
            
            xhr.send();
        }
        
        // Post loading completion is now handled within loadPostContent function
        
        // Add loading spinner
        function addLoadingSpinner() {
            const container = document.getElementById('posts-container');
            let spinner = document.getElementById('loading-spinner');
            
            if (!spinner) {
                spinner = document.createElement('div');
                spinner.id = 'loading-spinner';
                spinner.className = 'loading-spinner';
                spinner.innerHTML = `
                    <div class="spinner-ring"></div>
                    <div class="spinner-text">Loading post...</div>
                `;
            }
            
            container.appendChild(spinner);
            
            // Animate in
            setTimeout(() => {
                spinner.style.opacity = '1';
                spinner.style.transform = 'scale(1)';
            }, 50);
        }
        
        // Remove loading spinner
        function removeLoadingSpinner() {
            const spinner = document.getElementById('loading-spinner');
            if (spinner) {
                spinner.style.opacity = '0';
                spinner.style.transform = 'scale(0.8)';
                setTimeout(() => {
                    if (spinner.parentNode) {
                        spinner.parentNode.removeChild(spinner);
                    }
                }, 300);
            }
        }
        
        // Show pagination range with current page and surrounding pages
        function showPaginationRange(currentPage, totalPosts, paginationNumbers, activePostNumber = null) {
            // Show current page and 2 surrounding pages (total of 3 visible pages)
            let startPage = Math.max(1, currentPage - 1);
            let endPage = Math.min(totalPosts, currentPage + 1);
            
            // Adjust to always show 3 pages when possible
            if (endPage - startPage < 2) {
                if (startPage === 1) {
                    endPage = Math.min(totalPosts, startPage + 2);
                } else if (endPage === totalPosts) {
                    startPage = Math.max(1, endPage - 2);
                }
            }
            
            // Add first page if not included
            if (startPage > 1) {
                const firstPostId = allPosts[0];
                addPageButton(firstPostId, paginationNumbers, firstPostId === activePostNumber);
                if (startPage > 2) {
                    addEllipsis(paginationNumbers);
                }
            }
            
            // Add visible page numbers
            for (let i = startPage; i <= endPage; i++) {
                const postId = allPosts[i - 1];
                const isActive = postId === activePostNumber;
                addPageButton(postId, paginationNumbers, isActive);
            }
            
            // Add last page if not included
            if (endPage < totalPosts) {
                if (endPage < totalPosts - 1) {
                    addEllipsis(paginationNumbers);
                }
                const lastPostId = allPosts[totalPosts - 1];
                addPageButton(lastPostId, paginationNumbers, lastPostId === activePostNumber);
            }
        }
        
        // Update pagination to show current post in context
        function updatePaginationForPost(activePostNumber) {
            const paginationNumbers = document.querySelector('.pagination-numbers');
            paginationNumbers.innerHTML = '';
            
            const totalPosts = allPosts.length;
            const activeIndex = allPosts.indexOf(activePostNumber);
            
            // Calculate current page number (1-based)
            const currentPage = activeIndex + 1;
            
            if (totalPosts <= 3) {
                // If 3 or fewer posts, show all pages
                for (let i = 1; i <= totalPosts; i++) {
                    const postId = allPosts[i - 1];
                    const isActive = postId === activePostNumber;
                    addPageButton(postId, paginationNumbers, isActive);
                }
            } else {
                // Show current page and surrounding pages
                showPaginationRange(currentPage, totalPosts, paginationNumbers, activePostNumber);
            }
        }
        
        // Navigate to previous post (newer post - lower page number, left direction)
        function previousPost() {
            if (currentPostIndex > 0) {
                // Go to newer post (lower index in allPosts array = higher ID)
                const prevPostNumber = allPosts[currentPostIndex - 1];
                loadPost(prevPostNumber);
            }
        }
        
        // Navigate to next post (older post - higher page number, right direction)
        function nextPost() {
            if (currentPostIndex < allPosts.length - 1) {
                // Go to older post (higher index in allPosts array = lower ID)
                const nextPostNumber = allPosts[currentPostIndex + 1];
                loadPost(nextPostNumber);
            }
        }
        
        // Update navigation button states
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-page');
            const nextBtn = document.getElementById('next-page');
            
            if (prevBtn) {
                // Previous button (newer posts) is disabled when viewing newest post
                prevBtn.disabled = currentPostIndex <= 0;
            }
            
            if (nextBtn) {
                // Next button (older posts) is disabled when viewing oldest post
                nextBtn.disabled = currentPostIndex >= allPosts.length - 1;
            }
        }
        
        // Update active page indicator
        function updateActivePage(activePage) {
            // Remove active class from all page numbers
            document.querySelectorAll('.page-number').forEach(page => {
                page.classList.remove('active');
            });
            
            // Add active class to current page
            const activePageElement = document.querySelector(`[data-page="${activePage}"]`);
            if (activePageElement) {
                activePageElement.classList.add('active');
            }
        }
        
        // Load initial post based on URL hash or default to first
        function loadInitialPost() {
            var hash = window.location.hash;
            var postMatch = hash.match(/#post-(\d+)/);
            
            if (postMatch) {
                var postNumber = parseInt(postMatch[1]);
                if (allPosts.indexOf(postNumber) !== -1) {
                    loadPost(postNumber);
                    return;
                }
            }
            
            // Default to first post (most recent)
            if (allPosts.length > 0) {
                console.log('Loading initial post:', allPosts[0]);
                loadPost(allPosts[0]);
            } else {
                console.log('No posts detected, cannot load initial post');
            }
        }
        
        // Handle browser back/forward buttons
        window.addEventListener('popstate', function() {
            loadInitialPost();
        });
        
        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            detectPosts();
            
            // Add event listeners for Previous/Next buttons
            const prevBtn = document.getElementById('prev-page');
            const nextBtn = document.getElementById('next-page');
            
            if (prevBtn) {
                prevBtn.addEventListener('click', previousPost);
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', nextPost);
            }
        });
    </script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="/" class="logo">
                    <img src="Myco_Transparent.ico" alt="Myco Logo" class="logo-img">
                    <span class="logo-text">Myco</span>
                </a>
                <ul class="nav-menu">
                    <li><a href="/">Home</a></li>
                    <li><a href="docs.html">Docs</a></li>
                    <li><a href="grammar.html">Grammar</a></li>
                    <li><a href="downloads.html">Download</a></li>
                    <li><a href="community.html" class="active">Community</a></li>
                    <li><a href="https://github.com/IvyMycelia/Myco" target="_blank">GitHub</a></li>
                </ul>
                <div class="nav-controls">
                    <button class="theme-toggle" title="Switch theme (Ctrl+T)">
                        <span class="theme-icon">☾</span>
                        <span class="theme-text">Theme</span>
                    </button>
                    <button class="mobile-menu-btn">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="docs-main">
        <div class="container">
            <div class="docs-layout">
                <aside class="docs-sidebar">
                    <nav class="docs-nav">
                        <h3>Community</h3>
                        <ul>
                            <li><a href="#discord">Discord Server</a></li>
                            <li><a href="#latest-updates">Latest Updates</a></li>
                            <li><a href="#guidelines">Community Guidelines</a></li>
                            <li><a href="#connect">Connect</a></li>
                        </ul>
                    </nav>
                </aside>

                <div class="docs-content">
                    <h1>Myco Community</h1>
                    <p>Join our community of developers and stay updated on Myco development progress.</p>
                    
                    <section id="discord">
                        <h2>Discord Server</h2>
                        <p>Join our active Discord community to discuss Myco, get help, share projects, and stay updated on development progress.</p>
                        
                        <div class="code-block">
                            <div class="code-header">
                                <span>Discord Invite</span>
                            </div>
                            <pre><code>https://discord.gg/CR8xcKb3zM</code></pre>
                        </div>
                        
                        <p><strong>Features:</strong></p>
                        <ul>
                            <li>Real-time discussions</li>
                            <li>Development updates</li>
                            <li>Community support</li>
                            <li>Learning resources</li>
                        </ul>
                        
                        <p><a href="https://discord.gg/CR8xcKb3zM" class="btn btn-primary" target="_blank" rel="noopener">Join Discord Server</a></p>
                    </section>

                    <section id="latest-updates">
                        <h2>Latest Development Updates</h2>
                        <p>Stay informed about what's happening with Myco development.</p>
                        
                        <!-- Posts Container - Dynamically populated by JavaScript -->
                        <div id="posts-container">
                            <!-- Posts will be loaded directly into the DOM for perfect styling control -->
                            <div id="post-content">
                                <!-- Post content will be injected here -->
                            </div>
                        </div>
                        
                        <!-- Pagination -->
                        <div class="pagination">
                            <button class="pagination-btn" id="prev-page">← Previous</button>
                            <div class="pagination-numbers">
                                <!-- Page numbers will be generated dynamically -->
                            </div>
                            <button class="pagination-btn" id="next-page">Next →</button>
                        </div>
                    </section>

                    <section id="guidelines">
                        <h2>Community Guidelines</h2>
                        <p>Help us maintain a welcoming and productive community.</p>
                        
                        <div class="content-section">
                            <h3>Be Respectful</h3>
                            <p>Treat all community members with kindness and respect, regardless of their experience level.</p>
                        </div>
                        
                        <div class="content-section">
                            <h3>Share Ideas</h3>
                            <p>We welcome constructive feedback and new ideas for improving Myco.</p>
                        </div>
                        
                        <div class="content-section">
                            <h3>Help Others</h3>
                            <p>Support fellow developers by answering questions and sharing knowledge.</p>
                        </div>
                        
                        <div class="content-section">
                            <h3>Learn Together</h3>
                            <p>Share resources, tutorials, and learning experiences with the community.</p>
                        </div>
                    </section>

                    <section id="connect">
                        <h2>Connect With Us</h2>
                        <p>There are several ways to get involved with the Myco community:</p>
                        
                        <div class="content-section">
                            <h3>Discord</h3>
                            <p>Join our Discord server for real-time discussions and community support.</p>
                            <p><a href="https://discord.gg/CR8xcKb3zM" target="_blank" rel="noopener">Join Discord Community</a></p>
                        </div>
                        
                        <div class="content-section">
                            <h3>GitHub</h3>
                            <p>Contribute to the project, report issues, or request new features.</p>
                            <p><a href="https://github.com/IvyMycelia/Myco" target="_blank" rel="noopener">View on GitHub</a></p>
                        </div>
                        
                        <div class="content-section">
                            <h3>Documentation</h3>
                            <p>Read the documentation and learn how to use Myco effectively.</p>
                            <p><a href="docs.html">View Documentation</a></p>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Myco Language</h3>
                    <p>A lightweight scripting language designed for simplicity and readability.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="docs.html">Documentation</a></li>
                        <li><a href="grammar.html">Grammar</a></li>
                        <li><a href="downloads.html">Downloads</a></li>
                        <li><a href="community.html">Community</a></li>
                        <li><a href="https://github.com/IvyMycelia/Myco" target="_blank" rel="noopener">GitHub</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Connect</h3>
                    <ul>
                        <li><a href="https://discord.gg/CR8xcKb3zM" target="_blank" rel="noopener">Discord Community</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Join Our Community</h3>
                    <p>Connect with other developers and stay updated on Myco development.</p>
                    <a href="https://discord.gg/CR8xcKb3zM" class="btn btn-outline" target="_blank" rel="noopener">
                        Join Discord
                    </a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Myco Language. Built with ❤️ by Ivy Mycelia.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
</body>
</html>
